import{r,d as P,j as e,V as d,z as D,a3 as n,a6 as i,af as j,J as m,ag as f,ah as b,S as R,y as c}from"./vendor-Cul97NbA.js";import{A as S,U as B,i as I}from"./index-STTFwuxj.js";const K=({show:w,handleClose:p,handleShowLogin:k})=>{const{data:y}=r.useContext(S),{setUser:q}=r.useContext(B),C=P(),[a,v]=r.useState({fullName:"",email:"",phone:"",password:"",confirmPassword:""}),[L,T]=r.useState(1),[g,x]=r.useState(!1),[s,h]=r.useState(!1),o=u=>{let{name:t,value:l}=u.target;t==="phone"&&l.startsWith("0")&&(l="62"+l.substring(1)),v(A=>({...A,[t]:l}))},N=async u=>{if(u.preventDefault(),a.password!==a.confirmPassword)return c.error("Password dan konfirmasi tidak cocok!");if(a.password.length<8)return c.error("Password minimal 8 karakter!");x(!0);try{const t=await I.post("/auth/register-request",a,{withCredentials:!0});c.success(t.data.message),p(),C("/verification",{state:{email:a.email}})}catch(t){c.error(t.response?.data?.message||"Register Akun gagal.")}finally{x(!1)}};return e.jsxs(d,{show:w,onHide:p,centered:!0,backdrop:"static",keyboard:!1,children:[e.jsxs(D,{children:[e.jsx("title",{children:"Register Akun | Karang Taruna Dadi Bara"}),e.jsx("link",{rel:"canonical",href:"https://dadibara.bejalen.com/register"}),e.jsx("meta",{name:"description",content:"Buat akun baru dan bergabunglah dengan Karang Taruna DADI BARA Bejalen untuk ikut serta dalam kegiatan kepemudaan dan sosial."}),e.jsx("meta",{name:"robots",content:"noindex, follow"}),e.jsx("meta",{property:"og:title",content:"Register | Karang Taruna Dadi Bara"}),e.jsx("meta",{property:"og:description",content:"Jadi bagian dari kami! Daftar sekarang untuk berpartisipasi dalam program kerja KARTAR DADI BARA."}),e.jsx("meta",{property:"og:url",content:"https://dadibara.bejalen.com/register"}),e.jsx("meta",{property:"og:image",content:"https://dadibara.bejalen.com/path/ke/gambar_register_preview.jpg"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"})]}),e.jsx(d.Header,{closeButton:!0,children:e.jsxs(d.Title,{className:"section-title",children:[e.jsx("img",{src:y.logoDadiBara,alt:"Logo",width:"50",className:"me-2"}),"Register Akun"]})}),e.jsx(d.Body,{children:e.jsxs(n,{onSubmit:N,children:[e.jsx(i,{label:"Nama Lengkap",className:"mb-3",children:e.jsx(n.Control,{type:"text",name:"fullName",value:a.fullName,onChange:o,required:!0})}),e.jsx(i,{label:"Email",className:"mb-3",children:e.jsx(n.Control,{type:"email",name:"email",value:a.email,onChange:o,required:!0})}),e.jsx(i,{label:"Nomor Telepon",className:"mb-3",children:e.jsx(n.Control,{type:"tel",name:"phone",value:a.phone,onChange:o,required:!0})}),e.jsxs(j,{className:"mb-3",controlId:"formPassword",children:[e.jsx(i,{label:"Password",children:e.jsx(n.Control,{type:s?"text":"password",name:"password",value:a.password,onChange:o,required:!0,minLength:8})}),e.jsx(m,{variant:"outline-secondary",onClick:()=>h(!s),children:s?e.jsx(f,{}):e.jsx(b,{})})]}),e.jsxs(j,{className:"mb-3",controlId:"formConfirmPassword",children:[e.jsx(i,{label:"Konfirmasi Password",children:e.jsx(n.Control,{type:s?"text":"password",name:"confirmPassword",value:a.confirmPassword,onChange:o,required:!0})}),e.jsx(m,{variant:"outline-secondary",onClick:()=>h(!s),children:s?e.jsx(f,{}):e.jsx(b,{})})]}),e.jsx(m,{type:"submit",variant:"secondary",className:"w-100",disabled:g,children:g?e.jsx(R,{size:"sm"}):"Daftar"}),e.jsx("div",{className:"text-center my-2",children:"Atau"}),e.jsx(m,{variant:"outline-danger",className:"w-100",onClick:k,children:"Saya sudah memiliki Akun"})]})})]})};export{K as default};
