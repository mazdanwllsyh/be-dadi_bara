const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AppLandingPage-BaApq7um.js","assets/vendor-Cul97NbA.js","assets/vendor--KHUR0K4.css","assets/ThemeSwitcher-Crmr5owH.js","assets/AppDashboard-BM33aNKS.js"])))=>i.map(i=>d[i]);
import{a as v,r as n,j as t,u as C,S as y,N as g,L,A as O,R as w,b as x,h as I,c as R,t as _,H as N,G as T,B as U}from"./vendor-Cul97NbA.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))f(r);new MutationObserver(r=>{for(const e of r)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&f(o)}).observe(document,{childList:!0,subtree:!0});function c(r){const e={};return r.integrity&&(e.integrity=r.integrity),r.referrerPolicy&&(e.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?e.credentials="include":r.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function f(r){if(r.ep)return;r.ep=!0;const e=c(r);fetch(r.href,e)}})();const k="modulepreload",M=function(s){return"/"+s},j={},E=function(a,c,f){let r=Promise.resolve();if(c&&c.length>0){let l=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=o?.nonce||o?.getAttribute("nonce");r=l(c.map(u=>{if(u=M(u),u in j)return;j[u]=!0;const d=u.endsWith(".css"),m=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":k,d||(h.as="script"),h.crossOrigin="",h.href=u,i&&h.setAttribute("nonce",i),document.head.appendChild(h),d)return new Promise((S,P)=>{h.addEventListener("load",S),h.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${u}`)))})}))}function e(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return r.then(o=>{for(const i of o||[])i.status==="rejected"&&e(i.reason);return a().catch(e)})},p=v.create({baseURL:"https://be-dadi-bara.vercel.app/api/",withCredentials:!0});p.interceptors.response.use(s=>s,s=>(s.response&&(s.response.status===401||s.response.status===403)&&(sessionStorage.clear(),localStorage.removeItem("sessionExpiresAt")),Promise.reject(s)));const b=n.createContext(),B=({children:s})=>{const[a,c]=n.useState(null),[f,r]=n.useState(!0),e=n.useCallback(l=>{l?(c(l),l.sessionExpiresAt&&localStorage.setItem("sessionExpiresAt",l.sessionExpiresAt)):(c(null),localStorage.removeItem("sessionExpiresAt"))},[]),o=n.useCallback(async()=>{try{const l=await p.get("/auth/getuser",{withCredentials:!0});e(l.data.user)}catch{e(null)}finally{r(!1)}},[e]);n.useEffect(()=>{o()},[o]);const i=n.useMemo(()=>({user:a,setUser:e,loading:f,refetchUser:o}),[a,f,e,o]);return t.jsx(b.Provider,{value:i,children:!f&&s})},D=({children:s})=>{const{user:a,loading:c}=n.useContext(b),f=C();return c?t.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:t.jsx(y,{animation:"border"})}):a&&(a.role==="admin"||a.role==="superAdmin")?s:a?t.jsx(g,{to:"/profile",replace:!0}):t.jsx(g,{to:"/login",state:{from:f},replace:!0})},A=n.createContext(),q=({children:s})=>{const[a,c]=n.useState({}),[f,r]=n.useState(!0),[e,o]=n.useState(()=>localStorage.getItem("theme")||"light"),i=n.useCallback(d=>{c(m=>({...m,...d}))},[]);n.useEffect(()=>{(async()=>{try{const m=await p.get("/landing-config");c(m.data)}catch(m){console.error("Gagal mengambil data awal:",m)}finally{r(!1)}})()},[]);const l=n.useCallback(()=>{const d=e==="light"?"dark":"light";localStorage.setItem("theme",d),o(d)},[e]);n.useEffect(()=>{document.documentElement.setAttribute("data-bs-theme",e)},[e]);const u=n.useMemo(()=>({data:a,updateData:i,theme:e,toggleTheme:l}),[a,i,e,l]);return t.jsx(A.Provider,{value:u,children:!f&&s})},G=()=>{const{theme:s}=n.useContext(A);return t.jsx(L,{position:"bottom-center",autoClose:2500,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:s})},H=n.lazy(()=>E(()=>import("./AppLandingPage-BaApq7um.js"),__vite__mapDeps([0,1,2,3]))),V=n.lazy(()=>E(()=>import("./AppDashboard-BM33aNKS.js").then(s=>s.A),__vite__mapDeps([4,1,2,3])));function $(){return n.useEffect(()=>{O.init({duration:1400,easing:"ease-in-out",once:!0}),p.get("/auth/getuser").then(s=>{}).catch(s=>{})},[]),t.jsxs(q,{children:[t.jsx(B,{children:t.jsx(n.Suspense,{fallback:t.jsx("div",{className:"vh-100 d-flex justify-content-center align-items-center",children:t.jsx(y,{animation:"border"})}),children:t.jsxs(w,{children:[t.jsx(x,{path:"/admin/*",element:t.jsx(D,{children:t.jsx(V,{})})}),t.jsx(x,{path:"/*",element:t.jsx(H,{})})]})})}),t.jsx(G,{})]})}v.defaults.withCredentials=!0;I.locale("id");const z=R.createRoot(document.getElementById("root"));z.render(t.jsx(_.StrictMode,{children:t.jsx(N,{children:t.jsx(T,{clientId:"308833980192-nj8rado89j8dqchmk81h4pgfti469vrh.apps.googleusercontent.com",children:t.jsx(U,{children:t.jsx($,{})})})})}));export{A,G as T,b as U,E as _,p as i};
