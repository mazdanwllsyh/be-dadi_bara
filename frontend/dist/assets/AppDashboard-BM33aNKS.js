const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Dashboard-osMCVf8c.js","assets/vendor-Cul97NbA.js","assets/vendor--KHUR0K4.css","assets/index-STTFwuxj.js","assets/index-CiGYy_LI.css","assets/LandingPageDashboard-C80t-P_C.js","assets/useCustomSwals-CUxdPQJE.js","assets/GalleryEditor-Cr3dFjdn.js","assets/usePagination-D2N1ObOo.js","assets/Keanggotaan-D-9S76QK.js","assets/KeuanganDashboard-CFJIxzKB.js","assets/PendaftaranDashboard-Dz6zIDws.js","assets/UserDashboard-DfnQMI8J.js","assets/ThemeSwitcher-Crmr5owH.js","assets/AdminDashboard-U5ObuxQj.js"])))=>i.map(i=>d[i]);
import{U as S,A as _,i as P,_ as b}from"./index-STTFwuxj.js";import{r as a,u as L,j as e,J as y,K as W,O as V,P as $,d as D,Q as G,T as J,e as X,U as A,i as x,w as R,V as v,M as C,W as z,X as T,q as O,Y as F,Z as Y,o as M,_ as B,y as N,$ as q,a0 as w,a1 as Q,R as Z,b as f,S as ee}from"./vendor-Cul97NbA.js";import{T as U}from"./ThemeSwitcher-Crmr5owH.js";const ae=({isMobile:s})=>{const[n,h]=a.useState(!1),[t,r]=a.useState(null),i=L(),g=300;a.useEffect(()=>{if(!i.pathname.startsWith("/admin"))return;let l=0;const c=setInterval(()=>{l++;const m=g-l;m<=45&&r(m),m<=0&&(clearInterval(c),window.location.reload())},1e3);return()=>clearInterval(c)},[i]),a.useEffect(()=>{const l=["/admin/landingpage","/admin/gallery-dashboard","/admin/keanggotaan","/admin/keuangan","/admin/data-admin"],c=i.pathname,m=`refreshed-${c}`,o=sessionStorage.getItem(m);if(l.includes(c)&&!o){const p=setTimeout(()=>{sessionStorage.setItem(m,"true"),window.location.reload()},450);return()=>clearTimeout(p)}},[i]);const d=()=>{h(!0),window.location.reload()},u={position:"fixed",width:"2.8rem",height:"2.8rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2rem",zIndex:1050,boxShadow:"0 4px 8px rgba(0,0,0,0.2)",...s?{top:"95px",right:"20px"}:{bottom:"30px",right:"20px"}};return i.pathname.startsWith("/admin")?e.jsx(y,{variant:"secondary",style:u,onClick:d,disabled:n,"aria-label":"Refresh Dashboard",children:t!==null?e.jsx("b",{style:{fontSize:"1.2rem"},children:t}):e.jsx(W,{className:n?"spinning-icon":""})}):null},se=()=>{const{user:s}=a.useContext(S),{theme:n}=a.useContext(_),[h,t]=a.useState(null),[r,i]=a.useState(!1),[g,d]=a.useState(!1),[u,l]=a.useState(window.innerWidth<992),c=a.useRef(null);if(a.useEffect(()=>{const o=()=>l(window.innerWidth<992);return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),a.useEffect(()=>{if(!s||s.role!=="admin"&&s.role!=="superAdmin"){t(null);return}const o=localStorage.getItem("sessionExpiresAt");if(!o){t(null);return}const p=setInterval(()=>{const j=new Date().getTime(),k=parseInt(o,10)-j;if(k<0){clearInterval(p),t("Sesi Habis, Mulai Ulang Halaman Anda!"),i(!0),d(!1);return}const E=Math.floor(k%(1e3*60*60)/(1e3*60)),H=Math.floor(k%(1e3*60)/1e3),K=Math.floor(k/1e3);E<5?i(!0):i(!1),K<=150?d(!0):d(!1),t(`${String(E).padStart(2,"0")}:${String(H).padStart(2,"0")}`)},1e3);return()=>clearInterval(p)},[s]),h===null)return null;const m={position:"fixed",backgroundColor:r?"rgba(220, 53, 69, 0.9)":n==="dark"?"rgba(0, 0, 0, 0.75)":"darkcyan",color:"white",padding:"10px 15px",borderRadius:"10px",fontSize:"0.85rem",zIndex:1051,display:"flex",alignItems:"center",cursor:"move",boxShadow:"0 4px 8px rgba(0,0,0,0.3)",transition:"background-color 0.5s ease",...u?{top:"100px",left:"20px",transform:"translateX(-50%)"}:{top:"20px",right:"20px"}};return e.jsx(V,{nodeRef:c,children:e.jsxs("div",{ref:c,className:`session-timer-draggable ${g?"blinking-effect":""}`,style:m,children:[e.jsx($,{className:`me-2 ${r?"spinning-icon":""}`}),e.jsx("b",{className:"ms-1",children:h})]})})},ne=({expanded:s,setExpanded:n})=>{const{data:h}=a.useContext(_),{user:t,setUser:r}=a.useContext(S),i=L(),g=D(),[d,u]=a.useState(!1),l=()=>u(!1),c=()=>u(!0);a.useEffect(()=>{localStorage.setItem("sidebarExpanded",JSON.stringify(s))},[s]);const m=()=>{n(!s)},o=async()=>{l();try{await P.get("/auth/logout",{withCredentials:!0}),sessionStorage.clear(),r(null),N.success("Anda telah berhasil Logout."),g("/")}catch(j){N.error("Logout gagal, silakan coba lagi."),console.error("Logout error:",j)}},p=[{to:"/admin",icon:e.jsx(C,{}),text:"Dashboard"},{to:"/admin/landingpage",icon:e.jsx(z,{}),text:"Landing Page"},{to:"/admin/gallery-dashboard",icon:e.jsx(T,{}),text:"Gallery"},{to:"/admin/keanggotaan",icon:e.jsx(O,{}),text:"Keanggotaan"},{to:"/admin/keuangan",icon:e.jsx(F,{}),text:"Keuangan"},{to:"/admin/pendaftaran",icon:e.jsx(Y,{}),text:"Pendaftaran"},{to:"/admin/data-user",icon:e.jsx(M,{}),text:"Data User"},{to:"/admin/data-admin",icon:e.jsx(B,{}),text:"Data Admin"}];return e.jsxs("div",{className:`sidebar ${s?"expanded":"collapsed"}`,children:[e.jsx(y,{onClick:m,className:"sidebar-toggle",children:s?e.jsx(G,{}):e.jsx(J,{})}),e.jsxs("div",{className:"sidebar-inner-content",children:[e.jsx("div",{className:"sidebar-header",children:e.jsx(X.Brand,{as:A,to:"/",className:"d-flex justify-content-center my-3",children:e.jsx("img",{src:h.logoDadiBara,alt:"Logo",style:{width:s?"100px":"55px",transition:"width 0.3s ease-in-out"}})})}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(U,{expanded:s})}),e.jsx(x,{className:"flex-column w-100 my-2 flex-grow-1 d-flex justify-content-center",children:p.map((j,k)=>e.jsxs(x.Link,{as:A,to:j.to,className:`sidebar-link ${i.pathname===j.to?"active":""}`,children:[j.icon,s&&e.jsx("span",{className:"ms-2",children:j.text})]},k))})]}),e.jsxs("div",{className:"sidebar-footer mt-auto p-3 text-center",children:[e.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[e.jsx("a",{href:"/profile",children:e.jsx("img",{src:t?.profilePicture?t.profilePicture:"/default-avatar.png",alt:"Profile",className:"rounded-circle border-black",style:{width:s?"60px":"50px",height:s?"60px":"50px",objectFit:"cover",marginRight:s?"10px":"0",transition:"all 0.3s ease-in-out",backgroundColor:"darkcyan",border:"1px solid",padding:"5px"}})}),s&&e.jsx("span",{className:"text-muted SF-UIDisplay fw-bold text-uppercase",children:t?.role})]}),s&&e.jsx("div",{className:"my-2 text-title small text-body-emphasis",children:t?.fullName||"Admin"}),e.jsxs(y,{variant:"danger",className:"w-100 my-3 d-flex align-items-center justify-content-center",onClick:c,children:[e.jsx(R,{size:s?16:20}),s&&e.jsx("span",{className:"ms-2",children:"Logout"})]})]}),e.jsxs(v,{show:d,onHide:l,centered:!0,children:[e.jsx(v.Header,{closeButton:!0,children:e.jsx(v.Title,{className:"text-custom fw-bold",children:"Konfirmasi Logout"})}),e.jsx(v.Body,{children:"Apakah Anda yakin ingin keluar dari sesi ini?"}),e.jsxs(v.Footer,{children:[e.jsx(y,{variant:"secondary",onClick:l,children:"Batal"}),e.jsx(y,{variant:"danger",onClick:o,children:"Ya, Logout"})]})]})]})},te=({show:s,handleClose:n,handleOffcanvasShow:h})=>{const{data:t}=a.useContext(_),{user:r,setUser:i}=a.useContext(S),g=D(),d="/default-avatar.png",u=async()=>{try{await P.get("/auth/logout",{withCredentials:!0}),sessionStorage.clear(),i(null),N.success("Anda telah Logout."),g("/")}catch{N.error("Logout gagal, coba lagi.")}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mobile-header d-lg-none d-flex justify-content-between align-items-center p-3",style:{position:"fixed",top:0,width:"100%",zIndex:1045,boxShadow:"0 4px 8px rgba(0, 0, 0, 0.5)"},children:[e.jsx("div",{className:"d-flex align-items-center",children:e.jsx(y,{className:"sidebar-link border-1 border-black text-dark btn-secondary-emphasis shadow",onClick:h,children:e.jsx(q,{size:24})})}),e.jsx("div",{className:"d-flex align-items-center",children:r&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:"/profile",children:[e.jsx("img",{src:r.profilePicture?r.profilePicture:d,alt:"Admin Profile",className:"rounded-circle me-2",style:{width:"40px",height:"40px",objectFit:"cover",backgroundColor:"darkcyan",border:"1px solid",padding:"5px"},as:"a"}),e.jsx("span",{className:"admin-role fw-bold text-muted me-3 text-capitalize",children:r.role})]}),e.jsxs(y,{variant:"danger",size:"sm",onClick:u,children:[e.jsx(R,{})," Logout"]})]})})]}),e.jsxs(w,{show:s,onHide:n,className:"d-lg-none",children:[e.jsx(w.Header,{closeButton:!0,children:e.jsx(w.Title,{children:e.jsx("a",{href:"/",children:e.jsx("img",{src:t.logoDadiBara,alt:"Logo DADI BARA",style:{width:"100px"}})})})}),e.jsx("hr",{style:{margin:"8px 15px",borderTop:"4px solid var(--bs-border-color)"}}),e.jsx("div",{className:"d-flex px-3 my-3 justify-content-center",children:e.jsx(U,{isMobile:!0})}),e.jsx(w.Body,{children:e.jsxs(x,{className:"flex-column",children:[e.jsxs(x.Link,{href:"/admin",onClick:n,className:"sidebar-link my-2",children:[e.jsx(C,{className:"me-2"})," Dashboard"]}),e.jsxs(x.Link,{href:"/admin/landingpage",onClick:n,className:"sidebar-link my-2",children:[e.jsx(z,{className:"me-2"})," Landing Page"]}),e.jsxs(x.Link,{href:"/admin/gallery-dashboard",onClick:n,className:"sidebar-link my-2",children:[e.jsx(T,{className:"me-2"})," Gallery"]}),e.jsxs(x.Link,{href:"/admin/keanggotaan",onClick:n,className:"sidebar-link my-2",children:[e.jsx(O,{className:"me-2"})," Keanggotaan"]}),e.jsxs(x.Link,{href:"/admin/keuangan",onClick:n,className:"sidebar-link",children:[e.jsx(F,{className:"me-2"})," Keuangan"]}),e.jsxs(x.Link,{href:"/admin/pendaftaran",onClick:n,className:"sidebar-link my-2",children:[e.jsx(Q,{className:"me-2"})," Pendaftaran"]}),e.jsxs(x.Link,{href:"/admin/data-user",onClick:n,className:"sidebar-link my-2",children:[e.jsx(M,{className:"me-2"})," Data User"]}),e.jsxs(x.Link,{href:"/admin/data-admin",onClick:n,className:"sidebar-link my-2",children:[e.jsx(B,{className:"me-2"})," Data Admin"]})]})})]})]})},I=a.lazy(()=>b(()=>import("./Dashboard-osMCVf8c.js"),__vite__mapDeps([0,1,2,3,4]))),ie=a.lazy(()=>b(()=>import("./LandingPageDashboard-C80t-P_C.js"),__vite__mapDeps([5,1,2,3,4,6]))),re=a.lazy(()=>b(()=>import("./GalleryEditor-Cr3dFjdn.js"),__vite__mapDeps([7,1,2,3,4,8,6]))),oe=a.lazy(()=>b(()=>import("./Keanggotaan-D-9S76QK.js"),__vite__mapDeps([9,1,2,3,4,6]))),le=a.lazy(()=>b(()=>import("./KeuanganDashboard-CFJIxzKB.js"),__vite__mapDeps([10,1,2,3,4,6]))),de=a.lazy(()=>b(()=>import("./PendaftaranDashboard-Dz6zIDws.js"),__vite__mapDeps([11,1,2,3,4,6]))),ce=a.lazy(()=>b(()=>import("./UserDashboard-DfnQMI8J.js"),__vite__mapDeps([12,1,2,3,4,6,13]))),me=a.lazy(()=>b(()=>import("./AdminDashboard-U5ObuxQj.js"),__vite__mapDeps([14,1,2,3,4,6]))),xe=()=>{const{user:s}=a.useContext(S),[n,h]=a.useState(window.innerWidth<992),[t,r]=a.useState(!1),[i,g]=a.useState(!0),d=L();a.useEffect(()=>{const o=()=>{h(window.innerWidth<992)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),a.useEffect(()=>{const o=p=>{switch(p){case"/dashboard":case"/admin":return"Dashboard";case"/admin/landingpage":return"Pengaturan Landing Page";case"/admin/gallery-dashboard":return"Manajemen Galeri";case"/admin/keanggotaan":return"Manajemen Keanggotaan";case"/admin/keuangan":return"Laporan Keuangan";case"/admin/pendaftaran":return"Pendaftaran Anggota";case"/admin/data-user":return"Akun Pengguna";case"/admin/data-admin":return"Para Admin";default:return"Admin Dadi Bara"}};document.title=`${o(d.pathname)} | Admin DADI BARA`},[d]);const u=()=>r(!0),l=()=>r(!1);return e.jsxs("div",{className:"dashboard-layout",style:{display:"flex"},children:[n?e.jsx(te,{show:t,handleClose:l,handleOffcanvasShow:u}):e.jsx(ne,{expanded:i,setExpanded:g}),e.jsx("main",{className:"dashboard-content",style:{flex:1,padding:n?"80px 20px 20px 20px":"20px",transition:"margin-left 0.3s ease",marginLeft:n?0:i?"10px":"6px"},children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:"100vh"},children:e.jsx(ee,{animation:"border"})}),children:e.jsxs(Z,{children:[e.jsx(f,{path:"/",element:e.jsx(I,{})}),e.jsx(f,{path:"/dashboard",element:e.jsx(I,{})}),e.jsx(f,{path:"/landingpage",element:e.jsx(ie,{})}),e.jsx(f,{path:"/gallery-dashboard",element:e.jsx(re,{})}),e.jsx(f,{path:"/keanggotaan",element:e.jsx(oe,{})}),e.jsx(f,{path:"/keuangan",element:e.jsx(le,{})}),e.jsx(f,{path:"/pendaftaran",element:e.jsx(de,{})}),e.jsx(f,{path:"/data-user",element:e.jsx(ce,{})}),e.jsx(f,{path:"/data-admin",element:e.jsx(me,{})})]})})}),e.jsx(ae,{isMobile:n}),s&&(s.role==="admin"||s.role==="superAdmin")&&e.jsx(se,{})]})},fe=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{fe as A,ne as S};
