import{r as o,A as w,j as e,L as N,y as h,ad as v}from"./vendor-Cul97NbA.js";import{U as y}from"./index-STTFwuxj.js";const S=()=>{const{user:n}=o.useContext(y),[r,m]=o.useState({nama:"",email:"",pesan:""}),[g,f]=o.useState(!1),[x,c]=o.useState(!1),[b,p]=o.useState("");o.useEffect(()=>{n&&m(t=>({...t,nama:n.fullName||"",email:n.email||""}))},[n]),o.useEffect(()=>{w.init();const t=()=>{const a=localStorage.getItem("contactFormCooldownEnd");if(a){const s=parseInt(a)-new Date().getTime();if(s>0){c(!0);const l=Math.floor(s/(1e3*60*60)),u=Math.floor(s%(1e3*60*60)/(1e3*60));return p(`Pesan Anda sudah terkirim, Harap tunggu ${l} jam ${u} menit lagi`),s}else localStorage.removeItem("contactFormCooldownEnd"),c(!1)}return 0};if(t()>0){const a=setInterval(t,6e4);return()=>clearInterval(a)}},[]);const d=t=>{const{id:i,value:a}=t.target;m(s=>({...s,[i]:a}))},j=t=>{t.preventDefault();const{nama:i,email:a,pesan:s}=r;if(i===""||a===""||s===""){h.error("Mohon lengkapi semua kolom!",{position:"bottom-right"});return}f(!0),v.send("dadibaraemail","template_dadibara",{from_name:i,from_email:a,message:s,reply_to:a},"Ku_TJesVG59mypDDP").then(l=>{console.log("Berhasil mengirim email",l),h.success("Pesan Anda telah berhasil dikirim!",{position:"bottom-left"}),m({nama:"",email:"",pesan:""});const u=new Date().getTime()+2880*60*1e3;localStorage.setItem("contactFormCooldownEnd",u),c(!0),p("Harap tunggu 48 jam lagi")},l=>{console.error("Gagal mengirim email:",l),h.error("Terjadi kesalahan, silakan coba lagi.",{position:"bottom-center"})}).finally(()=>{f(!1)})};return e.jsxs("section",{id:"contact-us",className:"py-5 d-flex align-items-center",children:[e.jsx("div",{className:"container mt-5",children:e.jsxs("div",{className:"row row-cols-1 row-cols-md-2 g-4 justify-content-center",children:[e.jsxs("div",{className:"col","data-aos":"fade-up",children:[e.jsx("h2",{className:"section-title",children:"Hubungi Kami"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"mb-3 form-floating section-subtitle",children:[e.jsx("input",{type:"text",className:"form-control",id:"nama",placeholder:"Nama Anda",value:r.nama,onChange:d,required:!0,minLength:"4",style:{textTransform:"capitalize"}}),e.jsx("label",{htmlFor:"nama",children:"Nama Anda"})]}),e.jsxs("div",{className:"mb-3 form-floating section-subtitle",children:[e.jsx("input",{type:"email",className:"form-control",id:"email",placeholder:"Masukkan Email Anda",value:r.email,onChange:d,required:!0,minLength:"14"}),e.jsx("label",{htmlFor:"email",children:"Masukkan Email Anda"})]}),e.jsxs("div",{className:"mb-3 form-floating section-subtitle",children:[e.jsx("textarea",{className:"form-control",id:"pesan",rows:"8",style:{height:"8%"},placeholder:"Pesan atau Kritik dan Saran",value:r.pesan,onChange:d,required:!0,minLength:"20"}),e.jsx("label",{htmlFor:"pesan",children:"Pesan atau Kritik dan Saran"})]}),n&&(n.role==="admin"||n.role==="superAdmin")?null:x?e.jsx("div",{className:"text-center p-2 rounded bg-light",children:e.jsx("span",{className:"text-danger fw-bold",children:b})}):e.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-bold section-subtitle text-light",style:{backgroundColor:"darkcyan",border:0},disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Mengirim..."]}):"Kirim"})]})]}),e.jsxs("div",{className:"col","data-aos":"fade-left",children:[e.jsx("h2",{className:"section-title",children:"Lokasi Kami"}),e.jsx("iframe",{src:"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3957.704842855102!2d110.4102484110546!3d-7.274388092702384!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e708191c78f28b3%3A0x11e08aa67c6c30ff!2sBalai%20Desa%20Bejalen!5e0!3m2!1sid!2sid!4v1755281676932!5m2!1sid!2sid",referrerPolicy:"no-referrer-when-downgrade",width:"100%",height:"450",style:{border:0},allowFullScreen:"",loading:"lazy",title:"Map"})]})]})}),e.jsx(N,{})]})};export{S as default};
