import{r as n,A as y,j as a,C as u,S as k,D as o,E as g,aa as D}from"./vendor-Cul97NbA.js";import{A as N,i as b}from"./index-STTFwuxj.js";const E=()=>{const{data:r}=n.useContext(N),[l,x]=n.useState([]),[d,h]=n.useState([]),[m,f]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const t=await b.get("/jadwal-kegiatan");x(t.data||[])}catch(t){console.error("Gagal mengambil data jadwal:",t),x([])}finally{f(!1)}})()},[]),n.useEffect(()=>{y.init({duration:750,easing:"ease-in-out",once:!0})},[]);const p=e=>{const t=new Date(e);if(isNaN(t))return"Tanggal tidak valid";const s={weekday:"long",day:"2-digit",month:"long",year:"numeric"};return t.toLocaleDateString("id-ID",s)};return n.useEffect(()=>{if(l.length>0){const e=[...l].sort((c,i)=>new Date(c.tanggal)-new Date(i.tanggal)),t=new Date,s=new Date(t);s.setDate(t.getDate()-3);const j=new Date(t);j.setDate(t.getDate()+14);const w=e.filter(c=>{const i=new Date(c.tanggal);return i>=s&&i<=j});h(w)}else h([])},[l]),m?a.jsx("section",{id:"jadwal",className:"jadwal-kegiatan py-5 d-flex align-items-center justify-content-center",children:a.jsx(u,{children:a.jsx("div",{className:"text-center",children:a.jsx(k,{animation:"border"})})})}):a.jsx("section",{id:"jadwal",className:"jadwal-kegiatan py-5 d-flex align-items-center justify-content-center",children:a.jsxs(u,{children:[a.jsx(o,{className:"text-center mb-4","data-aos":"fade-down",children:a.jsxs(g,{children:[a.jsxs("h2",{className:"section-title",children:["Jadwal Kegiatan ",r.namaOrganisasi]}),a.jsx("p",{className:"section-subtitle text-center justify-content-center mb-3 opacity-50",children:d.length>0?`Berikut kegiatan Karang Taruna ${r.namaOrganisasi}`:`Belum ada kegiatan untuk ${r.namaOrganisasi}`})]})}),d.length>0?a.jsx(o,{className:"justify-content-center",children:a.jsxs(g,{lg:10,children:[a.jsxs(D,{striped:"columns",bordered:!0,responsive:!0,className:"table-jadwal","data-aos":"zoom-in",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Nama Kegiatan"}),a.jsx("th",{children:"Tempat"}),a.jsx("th",{children:"Tanggal Kegiatan"}),a.jsx("th",{children:"Waktu"}),a.jsx("th",{children:"Keterangan"})]})}),a.jsx("tbody",{children:d.map(e=>a.jsxs("tr",{children:[a.jsx("td",{children:e.nama}),a.jsx("td",{children:e.tempat}),a.jsx("td",{children:p(e.tanggal)}),a.jsx("td",{children:e.waktu}),a.jsx("td",{children:e.keterangan})]},e._id))})]}),a.jsxs("p",{className:"small text-center text-custom text-mute my-3","data-aos":"flip-down",children:["*jadwal yang ditampilkan",a.jsx("br",{})," ",a.jsx("strong",{children:"3 hari sesudah sampai 14 hari yang akan datang"})]})]})}):a.jsx(o,{className:"justify-content-center","data-aos":"flip-up",children:a.jsxs(g,{xs:"auto",children:[" ",a.jsx("p",{className:"text-center text-code",children:"Belum ada kegiatan yang dijadwalkan dalam waktu dekat ini."})]})})]})})};export{E as default};
