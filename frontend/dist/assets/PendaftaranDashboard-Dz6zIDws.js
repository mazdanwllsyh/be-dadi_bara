import{r,y as T,j as a,S as A,C as R,D as u,E as o,a5 as s,aS as I,a3 as _,aG as E,J as g,aO as W,aE as F,av as O,aT as z,aA as K,aB as U}from"./vendor-Cul97NbA.js";import{A as H,i as x}from"./index-STTFwuxj.js";import{u as J}from"./useCustomSwals-CUxdPQJE.js";O.register(z,K,U);const G={tableWrapper:{style:{borderRadius:"12px",overflow:"hidden"}},headRow:{style:{backgroundColor:"rgb(172, 172, 172)",borderBottom:"2px solid #dee2e6"}},headCells:{style:{color:"black",fontFamily:"SF UI Display",fontSize:"1.2rem",fontWeight:"bold",justifyContent:"center",borderRight:"1px solid #dee2e6","&:first-of-type":{borderLeft:"1px solid #dee2e6"}}},rows:{style:{borderBottom:"1px solid #dee2e6"}},cells:{style:{fontSize:"14px",borderRight:"1px solid #dee2e6","&:first-of-type":{borderLeft:"1px solid #dee2e6"},justifyContent:"center",alignItems:"center"}},pagination:{style:{justifyContent:"flex-end",padding:"10px 0"},select:{style:{border:"1px solid #ccc",borderRadius:"5px",padding:"5px",backgroundColor:"rgba(196, 176, 176, 0.9) !important",marginRight:"10px"}}},noData:{style:{display:"flex",alignItems:"center",justifyContent:"center",color:"var(--bs-secondary-color)",backgroundColor:"var(--bs-body-bg)",padding:"24px"}}},Q=()=>{const{data:M,theme:f}=r.useContext(H),[n,b]=r.useState([]),[w,d]=r.useState(!0),[i,y]=r.useState(""),[$,j]=r.useState(5),{showConfirmSwal:k,showSuccessSwal:C,showErrorSwal:N}=J(),P=e=>{const t={day:"2-digit",month:"long",year:"numeric"};return new Date(e).toLocaleDateString("id-ID",t)},S=n.length,v={labels:["Ketua","Sekretaris","Bendahara","Bidang Lain"],datasets:[{label:"Jumlah Pendaftar per Posisi",data:[n.filter(e=>e.position==="ketua").length,n.filter(e=>e.position==="sekretaris").length,n.filter(e=>e.position==="bendahara").length,n.filter(e=>e.position!=="ketua"&&e.position!=="sekretaris"&&e.position!=="bendahara").length],backgroundColor:["rgba(35, 99, 132, 0.65)","rgba(54, 162, 235, 0.63)","rgba(255, 206, 86, 0.63)","rgba(75, 192, 192, 0.6)"],borderWidth:1}]},l=r.useCallback(async()=>{d(!0);try{const e=await x.get("/pendaftaran",{withCredentials:!0});b(e.data||[])}catch{T.error("Gagal memuat data pendaftar.")}finally{d(!1)}},[]);r.useEffect(()=>{l()},[l]);const c=r.useMemo(()=>n.reduce((e,t)=>(t.gender==="Laki-laki"?e.lakiLaki++:t.gender==="Perempuan"&&e.perempuan++,e),{lakiLaki:0,perempuan:0}),[n]),m=e=>({ketua:"Ketua",sekretaris:"Sekretaris",bendahara:"Bendahara",bidang_rohani:"Bidang Kerohanian",bidang_umum:"Bidang Kesekretariatan & Umum",bidang_humas:"Bidang Hubungan Masyarakat",bidang_tekno:"Bidang Teknologi & Informasi",bidang_sosbud:"Bidang Sosial & Budaya",bidang_olahraga:"Bidang Olahraga & Kepemudaan",anggota:"Anggota"})[e]||e,L=async e=>{if(await k("Yakin ingin menghapus?","Apakah Anda yakin ingin menghapus pendaftar ini?"))try{await x.delete(`/pendaftaran/${e}`,{withCredentials:!0}),C("Pendaftar berhasil dihapus."),l()}catch(p){N(p.response?.data?.message||"Gagal menghapus pendaftar.")}},B=n.filter(e=>e.name&&e.name.toLowerCase().includes(i.toLowerCase())||e.email&&e.email.toLowerCase().includes(i.toLowerCase())||e.position&&m(e.position).toLowerCase().includes(i.toLowerCase())),D=[{name:"#",selector:(e,t)=>t+1,minWidth:"45px"},{name:"Nama",sortable:!0,width:"220px",wrap:!0,cell:e=>e.name?e.name.replace(/[.,]/g," ").split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1).toLowerCase()).join(" "):""},{name:"Email",selector:e=>e.email,sortable:!0,minWidth:"250px",wrap:!0},{name:"Jenis Kelamin",selector:e=>e.gender,sortable:!0,width:"180px"},{name:"Nomor Telepon",selector:e=>e.phone,width:"180px"},{name:"Jabatan",selector:e=>m(e.position),sortable:!0,wrap:!0,width:"220px"},{name:"Alamat",selector:e=>e.address,sortable:!0,wrap:!0,grow:2,width:"290px",whiteSpace:"pre-wrap"},{name:"Tanggal Lahir",selector:e=>P(e.birthDate),sortable:!0,width:"210px"},{name:"Minat & Bakat",selector:e=>e.interests||"-",sortable:!0,wrap:!0,grow:2,minWidth:"290px",whiteSpace:"pre-wrap"},{name:"Aksi",minWidth:"130px",cell:e=>a.jsxs("div",{className:"d-flex flex-column gap-2 py-2",children:[a.jsxs(g,{as:"a",href:`https://wa.me/${e.phone}`,target:"_blank",size:"sm",style:{backgroundColor:"#25D366",border:"none"},children:[a.jsx(W,{})," Hubungi"]}),a.jsxs(g,{variant:"danger",size:"sm",onClick:()=>L(e._id),children:[a.jsx(F,{})," Hapus"]})]})}];return w?a.jsx("div",{className:"d-flex justify-content-center align-items-center vh-100",children:a.jsx(A,{animation:"border"})}):a.jsxs(R,{fluid:!0,className:"py-4 my-3",children:[a.jsxs(u,{className:"mb-4 row-cols-1 row-cols-md-2 g-4",children:[a.jsx(o,{children:a.jsx(s,{className:"shadow-sm text-center dashboard-card",children:a.jsxs(s.Body,{children:[a.jsx(s.Title,{className:"fw-bold SF-UIDisplay",children:"Chart Pendaftar per Posisi"}),a.jsx("div",{children:a.jsx("div",{style:{height:"250px",position:"relative"},children:a.jsx(I,{data:v,options:{maintainAspectRatio:!1,responsive:!0,plugins:{legend:{labels:{color:f==="dark"?"white":"black"}}}}})})})]})})}),a.jsx(o,{children:a.jsx(s,{className:"shadow-sm text-center dashboard-card h-100",children:a.jsxs(s.Body,{className:"d-flex flex-column justify-content-center align-items-center",children:[a.jsx(s.Title,{className:"fw-bold SF-UIDisplay",children:"Total Pendaftar"}),a.jsx("h1",{className:"display-4 text-custom fw-bold text-secondary-emphasis",children:S}),a.jsx(s.Text,{className:"text-muted",children:"Orang telah mendaftar"}),a.jsx("hr",{className:"w-75"}),a.jsxs("div",{className:"d-flex justify-content-around w-100",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"mb-0 text-muted small",children:"Laki-laki (L)"}),a.jsx("p",{className:"fw-bold fs-5",children:c.lakiLaki})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"mb-0 text-muted small",children:"Perempuan (P)"}),a.jsx("p",{className:"fw-bold fs-5",children:c.perempuan})]})]})]})})})]}),a.jsx(s,{className:"shadow-sm mt-4",children:a.jsxs(s.Body,{children:[a.jsxs(u,{className:"justify-content-center justify-content-md-between align-items-center mb-3 g-2",children:[a.jsx(o,{xs:12,md:"auto",children:a.jsx("h5",{className:"card-title fw-bold text-center text-custom mb-0 text-body-emphasis",children:"Daftar Pendaftar"})}),a.jsx(o,{xs:12,md:4,className:"d-flex justify-content-center justify-content-md-end",children:a.jsx(_.Control,{type:"search",placeholder:"Cari pendaftar...",style:{maxWidth:"300px"},value:i,onChange:e=>y(e.target.value)})})]}),a.jsx(E,{columns:D,data:B,customStyles:G,pagination:!0,paginationPerPage:5,paginationRowsPerPageOptions:[10,25,50,100],onChangeRowsPerPage:j,paginationComponentOptions:{rowsPerPageText:"Baris per halaman:",rangeSeparatorText:"dari"},highlightOnHover:!0,pointerOnHover:!0,noDataComponent:a.jsxs("div",{className:"text-center my-5",children:[a.jsx("h3",{className:"SF-UIDisplay text-danger",children:"Tidak Ada Data untuk Ditampilkan"}),a.jsx("p",{children:"Saat ini belum ada data yang tersedia di dalam tabel ini."})]})})]})})]})};export{Q as default};
